$(function(){function a(a){a<0&&(a=0);var b=50,c=22,d=16,e=30,f=10;a<90&&(b=parseInt((90-a)/90*50+50,10)),c*=b/100,d*=b/100,e*=b/100,f*=b/100;var g=83*(b/100),h=308*(b/100),i=$("header h1"),j=$("header h2");i.width(h),i.height(g),i.css("marginTop",e),i.css("marginBottom",f),j.css("font-size",b+"%").height(b),j.css("paddingBottom",c),j.css("marginTop",d)}function q(a){jQuery.scrollTo.window().queue([]).stop(),c.scrollTo(a,1400)}var b=0,c=$(window),d=$("#speakers"),e=$("#venue"),f=$("#sponsors"),g=$("#workshops"),h=170,i={"#speakers":d,"#venue":e,"#sponsors":f,"#workshops":g};a(c.scrollTop()),c.scroll(function(d){function f(){var a=$(".birds"),b=parseInt(a.outerWidth()),c=parseInt(a.css("background-position").split(" ")[0]),d=c-b;a.css("background-position",d+"px 0px")}var e=c.scrollTop();a(e),f(),b=e});var j=0,k=!0,l=0;c.mousemove(function(a){function c(){if(l>10&&b>j){var a=$(".gargoyles"),c=parseInt(a.outerWidth()),d=parseInt(a.css("background-position").split(" ")[0]),e=d-c;a.css("background-position",e+"px 0px"),l=0}else if(l>10){var a=$(".gargoyles"),c=parseInt(a.outerWidth()),d=parseInt(a.css("background-position").split(" ")[0]),e=d+c;a.css("background-position",e+"px 0px"),l=0}else l++}function d(){if(k&&b>j){var a=$(".mini"),c=parseInt(a.css("transform").rotate*(180/Math.PI));if(c<12){var d=c+1;a.css("transform","rotate("+d+"deg)")}}else if(k){var a=$(".mini"),c=parseInt(a.css("transform").rotate*(180/Math.PI));if(c>-2){var d=c-1;a.css("transform","rotate("+d+"deg)")}}}var b=a.pageY;d(),c(),j=b});var m=!0,n=null;"DeviceOrientationEvent"in window&&window.addEventListener("deviceorientation",function(a){k=!1;var b=a.gamma,d=a.beta;n||(n=a.beta),d-=n;var e=null;m&&d>-3&&d<30&&(e=$("#mini"),e.css("transform","rotate("+d+"deg)"));if(m&&d>30){m=!1;var f=$("footer");e||(e=$("#mini"));var g=4e3;jQuery.scrollTo.window().queue([]).stop(),c.scrollTo(f,g,{easing:"linear"});var h=parseInt(f.offset().top)-parseInt(e.offset().top)-e.outerHeight();e.animate({transform:"rotate(180deg) translateY("+h+"px)"},{easing:"linear",duration:g,complete:function(){$(this).addClass("crashed")}})}},!1);var o=$("nav.primary"),p={sponsors:o.children("a.sponsors"),speakers:o.children("a.speakers"),venue:o.children("a.venue"),workshops:o.children("a.workshops")};c.bind("scroll",function(){var a=c.scrollTop()+100;a>i["#sponsors"].offset().top-h?(o.children("a.selected").removeClass("selected"),p.sponsors.addClass("selected")):a>i["#workshops"].offset().top-h?(o.children("a.selected").removeClass("selected"),p.workshops.addClass("selected")):a>i["#venue"].offset().top-h?(o.children("a.selected").removeClass("selected"),p.venue.addClass("selected")):a>i["#speakers"].offset().top-h?(o.children("a.selected").removeClass("selected"),p.speakers.addClass("selected")):a<410&&o.children("a.selected").removeClass("selected")}),$("nav.primary a").click(function(){var a=$(this);return jQuery.scrollTo.window().queue([]).stop(),c.scrollTo(i[this.hash].offset().top-h,1400,{easing:"swing",onAfter:function(){}}),!1}),$("footer nav.sections a").click(function(){var a=$(this.hash).offset().top-140;return q(a),!1}),$(".scroll").click(function(){var a=$(this.hash).offset().top-140;return q(a),!1}),$("header h1 a").click(function(){return jQuery.scrollTo.window().queue([]).stop(),c.scrollTo(0,1400),!1}),$(["../img/speakers/136/paul.jpg","../img/speakers/136/joern.jpg","../img/speakers/136/addy.jpg","../img/speakers/136/ralph.jpg","../img/speakers/136/doug.jpg","../img/speakers/136/dionben.jpg","../img/speakers/136/haymo.jpg","../img/speakers/136/christian.jpg"]).preloadImages(function(){}),$("#speakers ul.list li").click(function(){var a=$(this);if(!a.hasClass("selected")){var b=a.find("a.pic"),c=a.find("span.name"),d=a.find(".selected-speaker"),e=a.siblings(".selected"),f=e.find("a.pic"),g=e.find("span.name"),h=e.find(".selected-speaker");return h.addClass("animating"),e.animate({height:110,width:84},250,"linear",function(){e.removeClass("selected").removeAttr("style")}),g.animate({minHeight:16,width:74,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,fontSize:"1em"},250,"linear",function(){c.removeAttr("style")}),f.animate({height:26,width:84,marginTop:84},250,"linear",function(){f.removeAttr("style")}),c.css("textAlign","center"),c.css("backgroundColor","#db493c"),c.css("color","#ffffff"),c.animate({height:40,width:136,paddingTop:10,paddingBottom:29,paddingLeft:0,paddingRight:0,fontSize:"1.25em"},250,"linear",function(){c.removeAttr("style")}),b.animate({height:79,width:136,marginTop:136},250,"linear",function(){b.removeAttr("style")}),a.animate({height:210,width:136},250,"linear",function(){a.addClass("selected").removeAttr("style"),d.removeClass("animating")}),!1}}),$(".more").one("inview",function(){$(this).simpleAnimation({framerate:4})}),$(".radiohead").one("inview",function(){$(this).simpleAnimation({framerate:3})}),$(".heads").one("inview",function(){$(this).simpleAnimation({framerate:6})}),$(".caterpillar").one("inview",function(){$(this).simpleAnimation({framerate:3.5,pauseTime:"1500"})}),$(".shark").one("inview",function(){$(this).simpleAnimation({framerate:4})}),$(".no-touch #container").scrollParallax({speed:-0.2,axis:"y"}),$(".no-touch #foreground").scrollParallax({speed:-0.4,axis:"y"});if(!($.browser.msie&&parseInt($.browser.version)<9)){var r=!1,s=!1;c.bind("scroll",function(){var a=c.scrollTop(),b=190,d=$(".bannister");if(d.offset()){var e=parseInt(d.offset().top-220);if(s===!1&&a>e){s=!0;var f=1,g=0;d.animate({transform:"translateX(750px)"},{duration:3e3,easing:"linear",step:function(a,b){g>3?(f==6?f=1:f++,g=0):g++;var c=0;switch(f){case 1:c=0;break;case 2:c=200;break;case 3:c=400;break;case 4:c=600;break;case 5:c=800;break;case 6:c=1e3}$(b.elem).css("background-position","-"+c+"px 0px")}})}}if(r===!1&&a>b){var h=$(".bike");if(h.offset()){r=!0;var i=1,j=0;h.animate({transform:"translateX(550px)"},{duration:3e3,easing:"linear",step:function(a,b){j>6?(i==3?i=1:i++,j=0):j++;var c=0;switch(i){case 1:c=0;break;case 2:c=230;break;case 3:c=460}$(b.elem).css("background-position","-"+c+"px 0px")}})}}})}$("a.more").qtip({content:{title:{text:"Did you know??",button:"Close"}},position:{adjust:{screen:!0}},show:{when:"mouseenter click",solo:!0},hide:!1,style:{width:{max:320},padding:"10px",border:{width:1,radius:2,color:"#edf6f8"},name:"light"},api:{beforeShow:function(){$("#qtip-blanket").fadeIn(this.options.show.effect.length)},beforeHide:function(){$("#qtip-blanket").fadeOut(this.options.hide.effect.length)}}}),$('<div id="qtip-blanket">').css({position:"relative",width:"50%",opacity:0,zIndex:5e3}).appendTo(document.body).hide()}),$(function(){function m(a){var b="img/map_pin_restaurants_shadow.png",c=new google.maps.Marker({map:e,position:a.geometry.location,icon:b}),d={reference:a.reference},f=new google.maps.InfoWindow;service=new google.maps.places.PlacesService(e),service.getDetails(d,function(a,b){if(b==google.maps.places.PlacesServiceStatus.OK){var c='<div class="infowindow"><h3>'+a.name+'</h3><div class="content">'+a.formatted_address+"</div></div>";f.setContent(c)}}),google.maps.event.addListener(c,"click",function(){f.open(e,this)}),k["#restaurants"].push(c)}function n(a){var b="img/map_pin_accommodation_shadow.png",c=new google.maps.Marker({map:e,position:a.geometry.location,icon:b}),d={reference:a.reference},f=new google.maps.InfoWindow;service=new google.maps.places.PlacesService(e),service.getDetails(d,function(a,b){if(b==google.maps.places.PlacesServiceStatus.OK){var c='<div class="infowindow"><h3>'+a.name+'</h3><div class="content">'+a.formatted_address+"</div></div>";f.setContent(c)}}),google.maps.event.addListener(c,"click",function(){f.open(e,this)}),k["#accommodation"].push(c)}function o(a){var b="img/map_pin_alternativetour_shadow.png",c=[new google.maps.Marker({position:new google.maps.LatLng(51.759553,-1.255109),info:new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Pitt Rivers Museum</h3></div>'}),map:a,icon:b}),new google.maps.Marker({position:new google.maps.LatLng(51.75768,-1.212791),info:new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Headington Shark</h3></div>'}),map:a,icon:b}),new google.maps.Marker({position:new google.maps.LatLng(51.736118,-1.195807),info:new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Mini Factory Tour</h3></div>'}),map:a,icon:b}),new google.maps.Marker({position:new google.maps.LatLng(51.749391,-1.256908),info:new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Alice in Wonderland shop</h3></div>'}),map:a,icon:b}),new google.maps.Marker({position:new google.maps.LatLng(51.760589,-1.266521),info:new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Jericho Tavern</h3></div>'}),map:a,icon:b})];for(var d=0;d<c.length;d++)google.maps.event.addListener(c[d],"click",function(){this.info.open(a,this)});return c}var a=new google.maps.LatLng(51.75308,-1.26814),b=new google.maps.LatLng(51.7644,-1.25515),c=new google.maps.LatLng(51.75735,-1.26),d={zoom:14,center:c,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1},e=new google.maps.Map(document.getElementById("map_canvas"),d),f=new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Sa&iuml;d Business School</h3><div class="content">The conference venue</div></div>'}),g=new google.maps.InfoWindow({content:'<div class="infowindow"><h3>Lady Margaret Hall</h3><div class="content">The workshop venue</div></div>'}),h="img/map_pin_venue_shadow.png",i=new google.maps.Marker({position:a,map:e,icon:h}),j=new google.maps.Marker({position:b,map:e,icon:h});google.maps.event.addListener(i,"click",function(){f.open(e,i)}),google.maps.event.addListener(j,"click",function(){g.open(e,j)});var k={"#venue":[i,j],"#restaurants":[],"#accommodation":[],"#tour":o(e)},l={location:c,radius:"1000",types:["restaurant","lodging"]};service=new google.maps.places.PlacesService(e),service.search(l,function(a,b){if(b==google.maps.places.PlacesServiceStatus.OK)for(var c=0;c<a.length;c++)jQuery.inArray("lodging",a[c].types)!=-1?n(a[c]):jQuery.inArray("restaurant",a[c]["types"])!=-1&&m(a[c])}),$("#map ul a").click(function(){jQuery.scrollTo.window().queue([]).stop();var a=$(this),b=a.hasClass("off");if(k[this.hash])for(var c=0;c<k[this.hash].length;c++)k[this.hash][c].setVisible(b);return a.toggleClass("off"),!1})});