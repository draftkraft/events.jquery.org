/*
    A simple jQuery modal (http://github.com/kylefox/jquery-modal)
    Version 0.2.4
*/
(function(){var f=null;$.fn.modal=function(b){var c=$(this);if(c.attr('href')){c.click(open_modal_from_link);return}b=$.extend({},$.fn.modal.defaults,b);function block(){f.blocker=$('<div class="jquery-modal blocker"></div>').css({top:0,right:0,bottom:0,left:0,width:"100%",height:"100%",position:"fixed",zIndex:b.zIndex,background:b.overlay,opacity:b.opacity});if(b.escapeClose){$(document).keydown(function(a){if(a.which==27){$.fn.modal.close()}})}if(b.clickClose){f.blocker.click($.fn.modal.close)}$('body').append(f.blocker);c.trigger($.fn.modal.BLOCK,[f])}function show(){center_modal(f);if(b.showClose){f.closeButton=$('<a href="#close-modal" rel="modal:close" class="close-modal">'+b.closeText+'</a>');f.elm.append(f.closeButton)}c.addClass(b.modalClass).addClass('current').show();c.trigger($.fn.modal.OPEN,[f])}f={elm:c,options:b};c.trigger($.fn.modal.BEFORE_BLOCK,[f]);block();c.trigger($.fn.modal.BEFORE_OPEN,[f]);show()};$.fn.modal.defaults={overlay:"#000",opacity:0.75,zIndex:1,escapeClose:true,clickClose:true,closeText:'Close',modalClass:"modal",showClose:true};$.fn.modal.BEFORE_BLOCK='modal:before-block';$.fn.modal.BLOCK='modal:block';$.fn.modal.BEFORE_OPEN='modal:before-open';$.fn.modal.OPEN='modal:open';$.fn.modal.BEFORE_CLOSE='modal:before-close';$.fn.modal.CLOSE='modal:close';$.fn.modal.close=function(a){if(a){a.preventDefault()}if(!f){return}f.elm.trigger($.fn.modal.BEFORE_CLOSE,[f]);if(f.closeButton){f.closeButton.remove()}f.blocker.remove();f.elm.hide();f.elm.trigger($.fn.modal.CLOSE,[f]);f=null};$.fn.modal.resize=function(){center_modal(f)};function open_modal_from_link(d){d.preventDefault();var e=$(this).attr('href');if(e.match(/^#/)){$(e).modal()}else{$.get(e,{},function(c){$(c).appendTo('body').bind('modal:close',function(a,b){b.elm.remove()}).modal()})}}function center_modal(a){a.elm.css({position:'fixed',top:"50%",left:"50%",marginTop:-(a.elm.outerHeight()/2),marginLeft:-(a.elm.outerWidth()/2),zIndex:a.options.zIndex+1})};$('a[rel="modal:open"]').live('click',open_modal_from_link);$('a[rel="modal:close"]').live('click',$.fn.modal.close)})();